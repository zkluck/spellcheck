.home__main {
  position: relative;
  display: flex;
  /* 视口高度锁定：防止页面产生根级滚动条 */
  height: calc(100vh - var(--navbar-h));   /* fallback */
  height: calc(100svh - var(--navbar-h));  /* mobile safari */
  height: calc(100lvh - var(--navbar-h));  /* large viewport */
  height: calc(100dvh - var(--navbar-h));  /* dynamic viewport */
  padding: 24px 16px;
  /* 更克制的浅色渐变底，营造高级感 */
  background: radial-gradient(1200px 600px at 20% -10%, rgba(99,102,241,0.10), transparent 55%),
              radial-gradient(1000px 520px at 90% 0%, rgba(14,165,233,0.10), transparent 50%),
              linear-gradient(180deg, #f7f8fb 0%, #ffffff 100%);
  overflow: hidden; /* 让发光层不外溢 */
}

.home__main::before {
  content: '';
  position: absolute;
  inset: 0;
  /* 更轻的网格噪点，减少压迫感 */
  background-image: linear-gradient(rgba(2,6,23,0.035) 1px, transparent 1px),
                    linear-gradient(90deg, rgba(2,6,23,0.035) 1px, transparent 1px);
  background-size: 22px 22px, 22px 22px;
  pointer-events: none;
  z-index: 0;
}

/* 轻量动态霓虹光晕层（科技感） */
.home__main::after {
  content: '';
  position: absolute;
  left: -10%;
  top: -25%;
  width: 120%;
  height: 150%;
  background: conic-gradient(from 200deg at 70% 40%,
              rgba(14,165,233,0.18), rgba(99,102,241,0.16), rgba(168,85,247,0.12), rgba(34,211,238,0.14), rgba(14,165,233,0.18));
  filter: blur(52px);
  opacity: 0.35; /* 大幅降低存在感 */
  animation: home-glow-spin 32s linear infinite;
  pointer-events: none;
  z-index: 0;
}

.home__container {
  position: relative;
  margin: 0 auto;
  width: 100%;
  display: flex;
  flex-direction: column;
  flex: 1;
  min-height: 0; /* 允许子元素在flex容器中正确收缩 */
  z-index: 1; /* 盖在背景与光晕层之上 */
}

.home__error-banner {
  width: 100%;
  margin: 0 auto 14px auto;
  padding: 10px 12px;
  background: #fffbea;
  color: #7a5d00;
  border: 1px solid #ffe8a1;
  border-radius: 5px;
  box-shadow: 0 6px 24px rgba(0,0,0,0.05);
}

.home__layout {
  display: grid;
  position: relative; /* 建立明确包含块，保证子项 z-index 对比可控 */
  /* 三列布局：左侧栏 / 编辑器 / 结果面板 */
  grid-template-columns: clamp(240px, 22vw, 340px) 1fr clamp(380px, 36vw, 600px);
  grid-template-rows: minmax(0, 1fr); /* 关键修复：定义行高以约束其子项 */
  align-items: stretch; /* 保证两列高度一致，避免堆叠错觉 */
  gap: 22px;
  flex: 1;       /* 占满剩余高度 */
  min-height: 0; /* 避免子项溢出时撑破布局 */
  overflow: hidden; /* 关键修复：与 grid-template-rows 配合，隐藏外部滚动条 */
}

/* 允许网格子项在横向收缩，避免右侧内容挤压覆盖左侧 */
.home__layout > * {
  min-width: 0;
}

.home__editor-section {
  position: relative;
  z-index: 2; /* 提升层级，确保左侧永远在右侧之上 */
  isolation: isolate; /* 单独堆叠环境，避免跨列阴影/绘制干扰 */
  display: grid; /* 改为 grid 布局 */
  grid-template-rows: 1fr auto; /* 关键修复：让 TextEditor 占据剩余空间，审阅开关占据自身高度 */
  gap: 16px;
  min-height: 0; /* 允许在 grid/flex 布局中正确收缩 */
}

/* 左侧栏：放置 PipelineEditor */
.home__sidebar {
  position: relative;
  z-index: 2;
  display: flex;
  flex-direction: column;
  gap: 12px;
  padding: 12px;
  background: #ffffff;
  border: 1px solid rgba(2,6,23,0.06);
  border-radius: 10px;
  box-shadow: 0 8px 24px rgba(2,6,23,0.05);
  min-height: 0;
  overflow-y: auto;
  overflow-x: hidden; /* 防止横向滚动条 */
  white-space: normal;       /* 允许换行 */
  word-break: break-word;    /* 长词中断换行，防止被遮挡 */
  overflow-wrap: anywhere;   /* 任意位置换行作为兜底 */
}

.home__sidebar-title {
  font-weight: 600;
  font-size: 14px;
  color: #0f172a;
  margin: 2px 2px 6px 2px;
}


/* 重试提示样式（BEM） */
.home__retry-hint {
  color: #667085;
  font-size: 12px;
  margin: 4px 0;
}

@media (max-width: 1024px) {
  .home__layout {
    grid-template-columns: 1fr; /* 小屏改为单列：左栏 -> 编辑器 -> 结果面板 顺序堆叠 */
  }
}

/* 中等屏宽下，进一步收缩右侧，避免出现横向裁剪导致“右侧挡住左侧”错觉 */
@media (max-width: 1280px) and (min-width: 1025px) {
  .home__layout {
    grid-template-columns: clamp(220px, 22vw, 300px) 1fr clamp(320px, 38vw, 480px);
    gap: 18px;
  }
}

/* 提前在 1200px 阈值改为单列，避免夹在 1024~1200 宽度段的临界遮挡问题 */
@media (max-width: 1200px) {
  .home__layout {
    grid-template-columns: 1fr;
  }
}


/* 降低动画偏好时：保持布局，移除多余特效 */
@media (prefers-reduced-motion: reduce) {
  .home__main::before { display: none; }
  .home__main::after { animation: none; opacity: 0.2; }
}

@keyframes home-glow-spin {
  0% { transform: rotate(0deg) scale(1); }
  50% { transform: rotate(180deg) scale(1.03); }
  100% { transform: rotate(360deg) scale(1); }
}

/* ResultPanel 动态加载占位样式 */
.home__panel-loading {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 10px;
  padding: 12px;
  background: #ffffff;
  border: 1px solid rgba(2,6,23,0.06);
  border-radius: 10px;
  box-shadow: 0 8px 24px rgba(2,6,23,0.04);
  color: #334155;
  font-size: 13px;
  line-height: 1.2;
  text-align: center;
  margin: 8px auto; /* 水平居中并留出与周围元素的间距 */
  justify-self: center; /* 在 grid 单元内水平居中 */
  align-self: start; /* 避免在 grid 中被拉伸为整列高度，保持紧凑并靠上 */
}

.home__spinner {
  width: 16px;
  height: 16px;
  border-radius: 999px;
  border: 2px solid rgba(99,102,241,0.25);
  border-top-color: #6366f1;
  animation: home-spinner-rotate 0.9s linear infinite;
}

.sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 1px, 1px);
  white-space: nowrap;
  border: 0;
}

@keyframes home-spinner-rotate {
  to { transform: rotate(360deg); }
}

@media (prefers-reduced-motion: reduce) {
  .home__spinner { animation: none; }
}


